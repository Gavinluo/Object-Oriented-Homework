@startuml
title UC08 维护自习室/讨论室信息 活动图

|管理员|
start
:进入房间管理页面;
:选择操作类型\n(新增 / 修改 / 下线);

'================ 新增房间 ================
if (新增?) then (是)
  :点击“新增房间”;
  :填写房间编号、名称等信息;

  |场地资源管理子系统|
  :校验\n编号唯一等信息;

  if (校验通过?) then (是)
    :保存房间信息;
    |管理员|
    :提示“新增成功”;
  else (否)
    |管理员|
    :提示\n“信息有误，重新填写”;
  endif

'================ 修改房间 ================
elseif (修改?) then (是)
  |管理员|
  :在列表中选择房间;
  :修改房间属性\n或时间段;

  |场地资源管理子系统|
  :校验并\n保存修改;

  |管理员|
  :提示\n“修改成功”;

'================ 下线房间 ================
else (下线)
  |管理员|
  :在列表中选择房间;
  |场地资源管理子系统|
  :检查\n是否有未来预约;

  if (有未来预约?) then (是)
    |管理员|
    :确认\n“下线并取消预约?”;

    if (确认?) then (是)
      |预约管理子系统|
      :批量取消\n相关预约;
      |场地资源管理子系统|
      :设置 \n 房间状态=不可用;
      |管理员|
      :提示“下线成功\n相关预约已取消”;
    else (否)
      |管理员|
      :提示\n“已取消下线”;
    endif

  else (否)
    :直接设置\n房间状态=不可用;
    |管理员|
    :提示\n“下线成功”;
  endif

endif

|管理员|
:返回房间列表;
stop
@enduml
